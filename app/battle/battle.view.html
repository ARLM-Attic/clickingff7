<div class="uk-grid uk-grid-margin">

    <div class="uk-width-1-1 uk-margin-top">

        <div class="uk-panel">
            <div class="uk-grid">

                <!-- team list -->
                <div class="uk-width-1-3">
                    <div ng-repeat="(i, character) in g.battle.game.team" id="{{character.id}}"
                         class="uk-panel uk-panel-box">

                        <div class="uk-grid uk-grid-collapse">

                            <div class="uk-width-2-10 avatar avatar-team">
                                <div class="damage"></div>
                                <img ng-src="{{character.data.image}}" alt="character" width="50" />
                                <div class="infos">
                                    <span class="lvl">{{character.lvl}}</span>
                                    {{character.ref|translate}}
                                </div>
                            </div>
                            <div class="uk-width-3-10">
                                <div class="progress progress-hp">
                                    HP
                                    <div class="progress-bar" style="width: {{character.progress('hp')}}px">
                                    </div>
                                </div>
                                <div class="progress progress-mp">
                                    MP
                                    <div class="progress-bar" style="width: {{character.progress('mp')}}px">
                                    </div>
                                </div>
                                <div class="progress progress-lp">
                                    LP
                                    <div class="progress-bar" style="width: {{character.progress('lp')}}px">
                                    </div>
                                </div>
                                <div class="progress progress-xp">
                                    XP
                                    <div class="progress-bar" style="width: {{character.progress('xp')}}px">
                                    </div>
                                </div>
                                <div class="progress progress-cts">

                                    <div class="progress-bar" style="width: {{character.progress('cts')}}px">
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-5-10">

                                <ul class="uk-list uk-subnav">
                                    <li>
                                        <img ng-src="{{character.getStatusImg()}}"
                                             class="tm-icon-button active"
                                             data-uk-tooltip="{pos:'bottom', cls:'help'}"
                                             title="toggle status"
                                             ng-click="g.toggleStatus(character)"/>
                                    </li>
                                    <li ng-repeat="action in character.actions">
                                        <img ng-src="{{action.img}}"
                                             class="tm-icon-button"
                                             ng-class="{'active': action.isAvailable()}"
                                             data-uk-tooltip="{pos:'bottom', cls:'help'}"
                                             title="{{action.ref}}"
                                             ng-click="g.doAction(action)"/>
                                    </li>
                                </ul>

                            </div>
                            <div class="uk-width-1-1">
                                <div ng-if="!character.inStory()" class="battle-error">
                                    <i class="uk-icon-warning"></i>
                                    {{'battle no exp'|translate}}
                                </div>
                            </div>

                        </div>

                    </div>
                </div>

                <!-- enemies list -->
                <div class="uk-width-1-6">
                    <div ng-repeat="enemy in g.battle.enemies" id="{{enemy.id}}"
                         class="uk-panel uk-panel-box">

                        <div class="uk-grid uk-grid-collapse">

                            <div class="uk-width-1-4 avatar avatar-enemy">
                                <div class="damage"></div>
                                <img ng-src="{{enemy.data.image}}" alt="" width="50" />
                            </div>
                            <div class="uk-width-3-4">
                                <div class="infos">
                                    <span class="lvl">{{enemy.lvl}}</span>
                                    {{enemy.ref|translate}}
                                </div>

                                <div class="progress progress-hp">
                                    HP
                                    <div class="progress-bar" style="width: {{enemy.progress('hp')}}px">
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
                
                <div class="uk-width-1-2">

                    <div class="uk-panel uk-panel-box uk-panel-box-primary">
                        <div class="uk-panel-title">
                            Actions
                        </div>
                        <a href="" class="uk-button" ng-click="g.quit()">Escape</a>

                    </div>

                    <div class="uk-panel uk-panel-header">
                        <div class="uk-panel-title">
                            History
                        </div>
                        <div ng-repeat="info in g.battle.history.categories.battle track by $index">
                            {{info}}
                        </div>
                    </div>


                </div>

            </div>
        </div>

    </div>


</div>