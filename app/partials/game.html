<div class="part w300">
  <div>{{game.zone.name}} (<em>#{{game.zone.level}}</em>)</div>
  <div><span class="label">gils</span> <strong>{{game.total_gils|floor}}</strong></span></div>
</div><!--

--><div class="part w300">
  <div ng-if="game.zone.img"><img ng-src="img/zones/{{game.zone.img}}" width="100" /></div>
  <div ng-click="next_zone()" class="button" ng-class="{disabled: !game.can_next_zone()}" data-step="11" data-intro="Well, that's all. Now try your best to go to the next zone. Tip: you have to unlock the boss enemy and win the battle ;)">Go next zone</div>
</div><!--

--><div class="part w300">
  <div class="button" ng-click="help()" ng-class="{disabled: game.fight}">HOW TO PLAY</div>
</div>

<div class="space"></div>

<div class="part w100">
  <div ng-click="explore($event)" class="button" ng-class="{disabled: game.fight}">EXPLORE</div>
  <div ng-click="attack($event)" class="button" ng-class="{disabled: !game.characters.canAttack(), limit: game.characters.canLimit()}">
    <span ng-if="!game.characters.canLimit()" data-step="6" data-intro="During fight, click here to attack manually the enemy, as often as you want. Their HP will decrease faster.">ATTACK</span>
    <span ng-if="game.characters.canLimit()">LIMIT</span>
  </div>
</div><!--

--><div class="part enemy_hp w300" data-step="4" data-intro="This is enemy HP. During fight, enemy HP starts full, then decreases. If it goes to 0, you win the battle. That means, you earn XP, AP and GILS.">
  <div class="enemy_hp_progress" style="width:{{game.enemies.hpProgress(300)}}px;"></div>
  {{game.enemies.hp|round:2}} / {{game.enemies.hpMax}}
</div><!--

--><div class="part characters_hp w300" data-step="5" data-intro="This is your characters HP. During fight, it also decreases. If it comes to 0, you fail the battle. That means, you'll have to cure before fighting again.">
  <div class="characters_hp_progress" style="width:{{game.characters.hpProgress(300)}}px;"></div>
  {{game.characters.hp|round:2}} / {{game.characters.hpMax}}
</div><!--

--><div class="part w100">
  <div ng-click="cure($event)" class="button" ng-class="{disabled: !game.can_cure()}" data-step="7" data-intro="Anytime, if you think your character HP is too low, click here to regain life, as often as you want.">CURE</div>
  <div ng-click="escape($event)" class="button" ng-class="{disabled: !game.can_escape()}" data-step="8" data-intro="During fight, if you think the enemy is too strong, you can escape the battle by clicking here.">ESCAPE</div>
</div>

<div></div>

<div class="part w100"></div><!--

--><div class="part w300"></div><!--

--><div class="part characters_limit w300" data-step="9" data-intro="This is your characters LIMIT. During fight, when enemy deals you damages, this bar will grow up. When it becomes full, your next manual attack become critical !">
  <div class="characters_limit_progress" style="width:{{game.characters_limit_progress(300)}}px;"></div>
</div><!--

--><div class="part w100"></div>

<div class="space"></div>

<div class="part title w400">Enemy</div>
<div class="part title w50">VS</div>
<div class="part title w400">Characters</div>

<div class="space"></div>

<div class="part w400">

  <section class="enemies" data-step="2" data-intro="This is the enemy ! They are ordered by level. So, you should fight the first one to begin, then the second, etc." data-position="right">
    <div ng-repeat="enemy in game.enemies.getTeam() | clean" class="left div400 enemy">
      <div class="part avatar w50">
        <img ng-src="img/enemy/{{enemy.image}}" alt="avatar" height="48" />
      </div>
      <div class="part infos w300">
        {{enemy.name}} <strong>(LVL{{enemy.level|ceil}})</strong> 
        <span ng-if="enemy.boss">
          <span class="boss">BOSS</span> 
        </span>
        <div>
          <span class="label">hp</span> {{enemy.getHpMax()}} 
          <span class="label">pwr</span> {{enemy.getHits()}}
        </div>
        <div>
          <span class="label">xp</span> {{enemy.xpReward()}} 
          <span class="label">ap</span> {{enemy.apReward()}} 
          <span class="label">gils</span> {{enemy.gilsReward()}}
        </div>
      </div>
    </div>
  </sections>

</div><!--

--><div class="part w400">

  <section class="characters" data-step="1" data-intro="This is your team ! You begin with 2 characters. If they win battles, characters will level up and get stronger." data-position="left">
    <div ng-repeat="(i, character) in game.characters.getTeam() | clean" class="right div400 character">
      <div class="xp_progress" style="width:{{character.xpProgress(400)}}px;"></div>
      <div class="part infos w300">
        <div>{{character.name}} <strong>(LVL{{character.level}})</strong></div>
        <div ng-if="character.level > 0">
          <span class="label">hp</span> {{character.getHpMax()}} 
          <span class="label">pwr</span> {{character.getHits()|round:2}}
        </div>
        <div class="line">"{{character.getLine()}}"</div>
      </div><!--
      --><div class="part avatar w50">
        <img ng-src="img/characters/{{character.image}}" alt="avatar" />
      </div>
    </div>
    <div>
      <div>{{character.weapon.name()}}</div>
      <div>{{character.armor.name()}}</div>
      <div>{{character.materia.name()}}</div>
      <div>{{character.item.name()}}</div>
      <div>{{character.limit.name()}}</div>
    </div>
  </sections>

</div>

<div class="space"></div>

<div class="part title w400"></div>
<div class="part title w50"></div>
<div class="part title w400">Materias</div>

<div class="space"></div>

<div class="part w400"></div><!--

--><div class="part w400">

  <section class="materias" data-step="3" data-intro="This is your materias ! If your character win battles, they will grow up and get stronger." data-position="top">
    <div ng-repeat="(i, materia) in game.materias | clean" class="right div400 materia">
      <div class="ap_progress" style="width:{{materia.ap_progress(400)}}px;"></div>
      <div class="part infos w300">
        <div>{{materia.data.name}} <strong>(LVL{{materia.data.level}})</strong></div>
        <div class="line">"{{materia.get_desc()}}"</div>
      </div><!--
      --><div class="part avatar w50"></div>
    </div>
  </sections>

</div>

